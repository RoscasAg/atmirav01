"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/pdf-upload";
exports.ids = ["pages/api/pdf-upload"];
exports.modules = {

/***/ "@pinecone-database/pinecone":
/*!**********************************************!*\
  !*** external "@pinecone-database/pinecone" ***!
  \**********************************************/
/***/ ((module) => {

module.exports = require("@pinecone-database/pinecone");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "langchain/document":
/*!*************************************!*\
  !*** external "langchain/document" ***!
  \*************************************/
/***/ ((module) => {

module.exports = import("langchain/document");;

/***/ }),

/***/ "langchain/document_loaders/fs/pdf":
/*!****************************************************!*\
  !*** external "langchain/document_loaders/fs/pdf" ***!
  \****************************************************/
/***/ ((module) => {

module.exports = import("langchain/document_loaders/fs/pdf");;

/***/ }),

/***/ "langchain/embeddings/openai":
/*!**********************************************!*\
  !*** external "langchain/embeddings/openai" ***!
  \**********************************************/
/***/ ((module) => {

module.exports = import("langchain/embeddings/openai");;

/***/ }),

/***/ "langchain/text_splitter":
/*!******************************************!*\
  !*** external "langchain/text_splitter" ***!
  \******************************************/
/***/ ((module) => {

module.exports = import("langchain/text_splitter");;

/***/ }),

/***/ "langchain/vectorstores/pinecone":
/*!**************************************************!*\
  !*** external "langchain/vectorstores/pinecone" ***!
  \**************************************************/
/***/ ((module) => {

module.exports = import("langchain/vectorstores/pinecone");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpdf-upload&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cpdf-upload.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpdf-upload&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cpdf-upload.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_pdf_upload_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\pdf-upload.js */ \"(api)/./pages/api/pdf-upload.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_pdf_upload_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_pdf_upload_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_pdf_upload_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_pdf_upload_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/pdf-upload\",\n        pathname: \"/api/pdf-upload\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_pdf_upload_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnBkZi11cGxvYWQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q3BkZi11cGxvYWQuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDd0Q7QUFDeEQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHFEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxxREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pdGFjYS12Mi8/ZGI2NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHBkZi11cGxvYWQuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wZGYtdXBsb2FkXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcGRmLXVwbG9hZFwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpdf-upload&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cpdf-upload.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/pdf-upload.js":
/*!*********************************!*\
  !*** ./pages/api/pdf-upload.js ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var langchain_document_loaders_fs_pdf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! langchain/document_loaders/fs/pdf */ \"langchain/document_loaders/fs/pdf\");\n/* harmony import */ var _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @pinecone-database/pinecone */ \"@pinecone-database/pinecone\");\n/* harmony import */ var _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var langchain_document__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! langchain/document */ \"langchain/document\");\n/* harmony import */ var langchain_embeddings_openai__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! langchain/embeddings/openai */ \"langchain/embeddings/openai\");\n/* harmony import */ var langchain_vectorstores_pinecone__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! langchain/vectorstores/pinecone */ \"langchain/vectorstores/pinecone\");\n/* harmony import */ var langchain_text_splitter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! langchain/text_splitter */ \"langchain/text_splitter\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([langchain_document_loaders_fs_pdf__WEBPACK_IMPORTED_MODULE_0__, langchain_document__WEBPACK_IMPORTED_MODULE_2__, langchain_embeddings_openai__WEBPACK_IMPORTED_MODULE_3__, langchain_vectorstores_pinecone__WEBPACK_IMPORTED_MODULE_4__, langchain_text_splitter__WEBPACK_IMPORTED_MODULE_5__]);\n([langchain_document_loaders_fs_pdf__WEBPACK_IMPORTED_MODULE_0__, langchain_document__WEBPACK_IMPORTED_MODULE_2__, langchain_embeddings_openai__WEBPACK_IMPORTED_MODULE_3__, langchain_vectorstores_pinecone__WEBPACK_IMPORTED_MODULE_4__, langchain_text_splitter__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\nasync function handler(req, res) {\n    if (req.method === \"POST\") {\n        let { pdfpath, nifparam, docname } = req.body;\n        console.log(`Uploading book: ${pdfpath}`);\n        if (!nifparam) {\n            nifparam = \"Z00000300\"; // Set the 'nifparam' variable to 'Z00000300' if it doesn't exist in the request body\n        }\n        if (!docname) {\n            docname = \"general\";\n        }\n        /** STEP ONE: LOAD DOCUMENT */ const response = await fetch(pdfpath);\n        const blob = await response.blob();\n        const loader = new langchain_document_loaders_fs_pdf__WEBPACK_IMPORTED_MODULE_0__.PDFLoader(blob);\n        const docs = await loader.load();\n        if (docs.length === 0) {\n            console.log(\"No documents found.\");\n            return;\n        }\n        const splitter = new langchain_text_splitter__WEBPACK_IMPORTED_MODULE_5__.RecursiveCharacterTextSplitter({\n            chunkSize: 1000,\n            chunkOverlap: 200\n        });\n        const splitDocs = await splitter.splitDocuments(docs);\n        // Add the NIF as a metada for futher filtering\n        const reducedDocs = splitDocs.map((doc, index)=>{\n            const reducedMetadata = {\n                ...doc.metadata\n            };\n            reducedMetadata.NIF = nifparam; // Add a new 'NIF' property with the value of 'Z00000300'\n            reducedMetadata.Type = \"PDF\"; // Add a new 'Type' property with the value of 'PDF'\n            reducedMetadata.PDFPath = pdfpath; // Add a new 'PDFPath' property with the value of the original PDF path\n            reducedMetadata.Id = `${docname}#${index + 1}`; // Add a new 'Id' property formatted as 'docname#number'\n            delete reducedMetadata.pdf; // Remove the 'pdf' field\n            return new langchain_document__WEBPACK_IMPORTED_MODULE_2__.Document({\n                pageContent: doc.pageContent,\n                metadata: reducedMetadata\n            });\n        });\n        //console.log(docs[100]);\n        //console.log(splitDocs[100].metadata);\n        //console.log(reducedDocs[100].metadata);\n        /** STEP TWO: UPLOAD TO DATABASE */ const pc = new _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_1__.Pinecone();\n        let pineconeIndex; // Declare pineconeIndex outside to make it accessible outside the blocks\n        try {\n            await pc.createIndex({\n                name: process.env.PINECONE_INDEX,\n                dimension: 1536,\n                metric: \"cosine\",\n                spec: {\n                    serverless: {\n                        cloud: \"aws\",\n                        region: \"us-east-1\"\n                    }\n                }\n            });\n            pineconeIndex = pc.Index(process.env.PINECONE_INDEX); // Assign the value to pineconeIndex\n        } catch (error) {\n            pineconeIndex = pc.Index(process.env.PINECONE_INDEX); // Assign the value to pineconeIndex in case of an error\n        }\n        const namespace = nifparam;\n        await langchain_vectorstores_pinecone__WEBPACK_IMPORTED_MODULE_4__.PineconeStore.fromDocuments(reducedDocs, new langchain_embeddings_openai__WEBPACK_IMPORTED_MODULE_3__.OpenAIEmbeddings(), {\n            pineconeIndex,\n            namespace\n        });\n        console.log(\"Successfully uploaded to DB\");\n        // Modify output as needed\n        return res.status(200).json({\n            result: `Uploaded to Pinecone! Before splitting: ${docs.length}, After splitting: ${splitDocs.length}`\n        });\n    } else {\n        res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU0sQ0FBQyxDQUFDO1FBQ3hHO0lBQ0YsT0FBTztRQUNMZCxJQUFJaUQsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFRSxTQUFTO1FBQXFCO0lBQ3ZEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pdGFjYS12Mi8uL3BhZ2VzL2FwaS9wZGYtdXBsb2FkLmpzPzY5OTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUERGTG9hZGVyIH0gZnJvbSBcImxhbmdjaGFpbi9kb2N1bWVudF9sb2FkZXJzL2ZzL3BkZlwiO1xuaW1wb3J0IHsgUGluZWNvbmUgfSBmcm9tIFwiQHBpbmVjb25lLWRhdGFiYXNlL3BpbmVjb25lXCI7XG5pbXBvcnQgeyBEb2N1bWVudCB9IGZyb20gXCJsYW5nY2hhaW4vZG9jdW1lbnRcIjtcbmltcG9ydCB7IE9wZW5BSUVtYmVkZGluZ3MgfSBmcm9tIFwibGFuZ2NoYWluL2VtYmVkZGluZ3Mvb3BlbmFpXCI7XG5pbXBvcnQgeyBQaW5lY29uZVN0b3JlIH0gZnJvbSBcImxhbmdjaGFpbi92ZWN0b3JzdG9yZXMvcGluZWNvbmVcIjtcbmltcG9ydCB7IFJlY3Vyc2l2ZUNoYXJhY3RlclRleHRTcGxpdHRlciB9IGZyb20gXCJsYW5nY2hhaW4vdGV4dF9zcGxpdHRlclwiO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGlmIChyZXEubWV0aG9kID09PSBcIlBPU1RcIikge1xuICAgIGxldCB7IHBkZnBhdGgsIG5pZnBhcmFtLCBkb2NuYW1lIH0gPSByZXEuYm9keTtcbiAgICBjb25zb2xlLmxvZyhgVXBsb2FkaW5nIGJvb2s6ICR7cGRmcGF0aH1gKTtcblxuICAgIGlmICghbmlmcGFyYW0pIHtcbiAgICAgIG5pZnBhcmFtID0gXCJaMDAwMDAzMDBcIjsgLy8gU2V0IHRoZSAnbmlmcGFyYW0nIHZhcmlhYmxlIHRvICdaMDAwMDAzMDAnIGlmIGl0IGRvZXNuJ3QgZXhpc3QgaW4gdGhlIHJlcXVlc3QgYm9keVxuICAgIH1cblxuICAgIGlmICghZG9jbmFtZSkge1xuICAgICAgZG9jbmFtZSA9IFwiZ2VuZXJhbFwiO1xuICAgIH1cblxuICAgIC8qKiBTVEVQIE9ORTogTE9BRCBET0NVTUVOVCAqL1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gocGRmcGF0aCk7XG4gICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICBjb25zdCBsb2FkZXIgPSBuZXcgUERGTG9hZGVyKGJsb2IpO1xuICAgIGNvbnN0IGRvY3MgPSBhd2FpdCBsb2FkZXIubG9hZCgpO1xuXG4gICAgaWYgKGRvY3MubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIk5vIGRvY3VtZW50cyBmb3VuZC5cIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc3BsaXR0ZXIgPSBuZXcgUmVjdXJzaXZlQ2hhcmFjdGVyVGV4dFNwbGl0dGVyKHtcbiAgICAgIGNodW5rU2l6ZTogMTAwMCxcbiAgICAgIGNodW5rT3ZlcmxhcDogMjAwLFxuICAgIH0pO1xuXG4gICAgY29uc3Qgc3BsaXREb2NzID0gYXdhaXQgc3BsaXR0ZXIuc3BsaXREb2N1bWVudHMoZG9jcyk7XG5cbiAgICAvLyBBZGQgdGhlIE5JRiBhcyBhIG1ldGFkYSBmb3IgZnV0aGVyIGZpbHRlcmluZ1xuICAgIGNvbnN0IHJlZHVjZWREb2NzID0gc3BsaXREb2NzLm1hcCgoZG9jLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgcmVkdWNlZE1ldGFkYXRhID0geyAuLi5kb2MubWV0YWRhdGEgfTtcbiAgICAgIHJlZHVjZWRNZXRhZGF0YS5OSUYgPSBuaWZwYXJhbTsgLy8gQWRkIGEgbmV3ICdOSUYnIHByb3BlcnR5IHdpdGggdGhlIHZhbHVlIG9mICdaMDAwMDAzMDAnXG4gICAgICByZWR1Y2VkTWV0YWRhdGEuVHlwZSA9IFwiUERGXCI7IC8vIEFkZCBhIG5ldyAnVHlwZScgcHJvcGVydHkgd2l0aCB0aGUgdmFsdWUgb2YgJ1BERidcbiAgICAgIHJlZHVjZWRNZXRhZGF0YS5QREZQYXRoID0gcGRmcGF0aDsgLy8gQWRkIGEgbmV3ICdQREZQYXRoJyBwcm9wZXJ0eSB3aXRoIHRoZSB2YWx1ZSBvZiB0aGUgb3JpZ2luYWwgUERGIHBhdGhcbiAgICAgIHJlZHVjZWRNZXRhZGF0YS5JZCA9IGAke2RvY25hbWV9IyR7aW5kZXggKyAxfWA7IC8vIEFkZCBhIG5ldyAnSWQnIHByb3BlcnR5IGZvcm1hdHRlZCBhcyAnZG9jbmFtZSNudW1iZXInXG4gICAgICBkZWxldGUgcmVkdWNlZE1ldGFkYXRhLnBkZjsgLy8gUmVtb3ZlIHRoZSAncGRmJyBmaWVsZFxuXG4gICAgICByZXR1cm4gbmV3IERvY3VtZW50KHtcbiAgICAgICAgcGFnZUNvbnRlbnQ6IGRvYy5wYWdlQ29udGVudCxcbiAgICAgICAgbWV0YWRhdGE6IHJlZHVjZWRNZXRhZGF0YSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy9jb25zb2xlLmxvZyhkb2NzWzEwMF0pO1xuICAgIC8vY29uc29sZS5sb2coc3BsaXREb2NzWzEwMF0ubWV0YWRhdGEpO1xuICAgIC8vY29uc29sZS5sb2cocmVkdWNlZERvY3NbMTAwXS5tZXRhZGF0YSk7XG5cbiAgICAvKiogU1RFUCBUV086IFVQTE9BRCBUTyBEQVRBQkFTRSAqL1xuICAgIGNvbnN0IHBjID0gbmV3IFBpbmVjb25lKCk7XG5cbiAgICBsZXQgcGluZWNvbmVJbmRleDsgLy8gRGVjbGFyZSBwaW5lY29uZUluZGV4IG91dHNpZGUgdG8gbWFrZSBpdCBhY2Nlc3NpYmxlIG91dHNpZGUgdGhlIGJsb2Nrc1xuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHBjLmNyZWF0ZUluZGV4KHtcbiAgICAgICAgbmFtZTogcHJvY2Vzcy5lbnYuUElORUNPTkVfSU5ERVgsXG4gICAgICAgIGRpbWVuc2lvbjogMTUzNixcbiAgICAgICAgbWV0cmljOiBcImNvc2luZVwiLFxuICAgICAgICBzcGVjOiB7XG4gICAgICAgICAgc2VydmVybGVzczoge1xuICAgICAgICAgICAgY2xvdWQ6IFwiYXdzXCIsXG4gICAgICAgICAgICByZWdpb246IFwidXMtZWFzdC0xXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgcGluZWNvbmVJbmRleCA9IHBjLkluZGV4KHByb2Nlc3MuZW52LlBJTkVDT05FX0lOREVYKTsgLy8gQXNzaWduIHRoZSB2YWx1ZSB0byBwaW5lY29uZUluZGV4XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHBpbmVjb25lSW5kZXggPSBwYy5JbmRleChwcm9jZXNzLmVudi5QSU5FQ09ORV9JTkRFWCk7IC8vIEFzc2lnbiB0aGUgdmFsdWUgdG8gcGluZWNvbmVJbmRleCBpbiBjYXNlIG9mIGFuIGVycm9yXG4gICAgfVxuXG4gICAgY29uc3QgbmFtZXNwYWNlID0gbmlmcGFyYW07XG5cbiAgICBhd2FpdCBQaW5lY29uZVN0b3JlLmZyb21Eb2N1bWVudHMocmVkdWNlZERvY3MsIG5ldyBPcGVuQUlFbWJlZGRpbmdzKCksIHtcbiAgICAgIHBpbmVjb25lSW5kZXgsXG4gICAgICBuYW1lc3BhY2UsXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZyhcIlN1Y2Nlc3NmdWxseSB1cGxvYWRlZCB0byBEQlwiKTtcbiAgICAvLyBNb2RpZnkgb3V0cHV0IGFzIG5lZWRlZFxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICByZXN1bHQ6IGBVcGxvYWRlZCB0byBQaW5lY29uZSEgQmVmb3JlIHNwbGl0dGluZzogJHtkb2NzLmxlbmd0aH0sIEFmdGVyIHNwbGl0dGluZzogJHtzcGxpdERvY3MubGVuZ3RofWAsXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBtZXNzYWdlOiBcIk1ldGhvZCBub3QgYWxsb3dlZFwiIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiUERGTG9hZGVyIiwiUGluZWNvbmUiLCJEb2N1bWVudCIsIk9wZW5BSUVtYmVkZGluZ3MiLCJQaW5lY29uZVN0b3JlIiwiUmVjdXJzaXZlQ2hhcmFjdGVyVGV4dFNwbGl0dGVyIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInBkZnBhdGgiLCJuaWZwYXJhbSIsImRvY25hbWUiLCJib2R5IiwiY29uc29sZSIsImxvZyIsInJlc3BvbnNlIiwiZmV0Y2giLCJibG9iIiwibG9hZGVyIiwiZG9jcyIsImxvYWQiLCJsZW5ndGgiLCJzcGxpdHRlciIsImNodW5rU2l6ZSIsImNodW5rT3ZlcmxhcCIsInNwbGl0RG9jcyIsInNwbGl0RG9jdW1lbnRzIiwicmVkdWNlZERvY3MiLCJtYXAiLCJkb2MiLCJpbmRleCIsInJlZHVjZWRNZXRhZGF0YSIsIm1ldGFkYXRhIiwiTklGIiwiVHlwZSIsIlBERlBhdGgiLCJJZCIsInBkZiIsInBhZ2VDb250ZW50IiwicGMiLCJwaW5lY29uZUluZGV4IiwiY3JlYXRlSW5kZXgiLCJuYW1lIiwicHJvY2VzcyIsImVudiIsIlBJTkVDT05FX0lOREVYIiwiZGltZW5zaW9uIiwibWV0cmljIiwic3BlYyIsInNlcnZlcmxlc3MiLCJjbG91ZCIsInJlZ2lvbiIsIkluZGV4IiwiZXJyb3IiLCJuYW1lc3BhY2UiLCJmcm9tRG9jdW1lbnRzIiwic3RhdHVzIiwianNvbiIsInJlc3VsdCIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/pdf-upload.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpdf-upload&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cpdf-upload.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();