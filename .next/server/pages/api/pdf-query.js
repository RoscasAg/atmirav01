"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/pdf-query";
exports.ids = ["pages/api/pdf-query"];
exports.modules = {

/***/ "@pinecone-database/pinecone":
/*!**********************************************!*\
  !*** external "@pinecone-database/pinecone" ***!
  \**********************************************/
/***/ ((module) => {

module.exports = require("@pinecone-database/pinecone");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "@langchain/core/prompts":
/*!******************************************!*\
  !*** external "@langchain/core/prompts" ***!
  \******************************************/
/***/ ((module) => {

module.exports = import("@langchain/core/prompts");;

/***/ }),

/***/ "@langchain/openai":
/*!************************************!*\
  !*** external "@langchain/openai" ***!
  \************************************/
/***/ ((module) => {

module.exports = import("@langchain/openai");;

/***/ }),

/***/ "@langchain/pinecone":
/*!**************************************!*\
  !*** external "@langchain/pinecone" ***!
  \**************************************/
/***/ ((module) => {

module.exports = import("@langchain/pinecone");;

/***/ }),

/***/ "langchain/chains/combine_documents":
/*!*****************************************************!*\
  !*** external "langchain/chains/combine_documents" ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = import("langchain/chains/combine_documents");;

/***/ }),

/***/ "langchain/chains/history_aware_retriever":
/*!***********************************************************!*\
  !*** external "langchain/chains/history_aware_retriever" ***!
  \***********************************************************/
/***/ ((module) => {

module.exports = import("langchain/chains/history_aware_retriever");;

/***/ }),

/***/ "langchain/chains/retrieval":
/*!*********************************************!*\
  !*** external "langchain/chains/retrieval" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = import("langchain/chains/retrieval");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpdf-query&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cpdf-query.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpdf-query&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cpdf-query.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_pdf_query_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\pdf-query.ts */ \"(api)/./pages/api/pdf-query.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_pdf_query_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_pdf_query_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_pdf_query_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_pdf_query_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/pdf-query\",\n        pathname: \"/api/pdf-query\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_pdf_query_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnBkZi1xdWVyeSZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDcGRmLXF1ZXJ5LnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3VEO0FBQ3ZEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxvREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsb0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaXRhY2EtdjIvPzVmNDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxwZGYtcXVlcnkudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wZGYtcXVlcnlcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wZGYtcXVlcnlcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpdf-query&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cpdf-query.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/pdf-query.ts":
/*!********************************!*\
  !*** ./pages/api/pdf-query.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @pinecone-database/pinecone */ \"@pinecone-database/pinecone\");\n/* harmony import */ var _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _langchain_openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/openai */ \"@langchain/openai\");\n/* harmony import */ var _langchain_pinecone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/pinecone */ \"@langchain/pinecone\");\n/* harmony import */ var langchain_chains_retrieval__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! langchain/chains/retrieval */ \"langchain/chains/retrieval\");\n/* harmony import */ var _langchain_core_prompts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @langchain/core/prompts */ \"@langchain/core/prompts\");\n/* harmony import */ var langchain_chains_combine_documents__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! langchain/chains/combine_documents */ \"langchain/chains/combine_documents\");\n/* harmony import */ var langchain_chains_history_aware_retriever__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! langchain/chains/history_aware_retriever */ \"langchain/chains/history_aware_retriever\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_langchain_openai__WEBPACK_IMPORTED_MODULE_1__, _langchain_pinecone__WEBPACK_IMPORTED_MODULE_2__, langchain_chains_retrieval__WEBPACK_IMPORTED_MODULE_3__, _langchain_core_prompts__WEBPACK_IMPORTED_MODULE_4__, langchain_chains_combine_documents__WEBPACK_IMPORTED_MODULE_5__, langchain_chains_history_aware_retriever__WEBPACK_IMPORTED_MODULE_6__]);\n([_langchain_openai__WEBPACK_IMPORTED_MODULE_1__, _langchain_pinecone__WEBPACK_IMPORTED_MODULE_2__, langchain_chains_retrieval__WEBPACK_IMPORTED_MODULE_3__, _langchain_core_prompts__WEBPACK_IMPORTED_MODULE_4__, langchain_chains_combine_documents__WEBPACK_IMPORTED_MODULE_5__, langchain_chains_history_aware_retriever__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\nconst CUSTOM_QUESTION_GENERATOR_CHAIN_PROMPT = `Given the following conversation and a follow up question, return the conversation history excerpt that includes any relevant context to the question if it exists and rephrase the follow up question to be a standalone question.\nFollow Up Input: {question}\nYour answer should follow the following format:\n\\`\\`\\`\nUse the following pieces of context to answer the users question. First of all look at the documents uploaded at the vector store and after that look at the chat history and see if there is any relevant context to the question. If there is, then rephrase the question to be a standalone question.\nAlways answer in Spanish. If you don't know the answer, just say that you don't know, don't try to make up an answer.\n----------------\n<Relevant chat history excerpt as context here>\nStandalone question: <Rephrased question here>\n\\`\\`\\`\nYour answer:`;\n// Contextualize question\nconst contextualizeQSystemPrompt = `\nGiven a chat history and the latest user question\nwhich might reference context in the chat history,\nformulate a standalone question which can be understood\nwithout the chat history. Do NOT answer the question, just\nreformulate it if needed and otherwise return it as is.`;\n// Answer question\nconst qaSystemPrompt = `\nYou are an assistant for question-answering tasks. Use\nthe following pieces of retrieved context to answer the\nquestion. If you don't know the answer, just say that you\ndon't know. Use three sentences maximum and keep the answer\nconcise.\n\\n\\n\n{context}`;\nlet chain;\nasync function handler(req, res) {\n    try {\n        if (req.method !== \"POST\") {\n            throw new Error(\"Method not allowed\");\n        }\n        // Grab the user prompt\n        let { question, nifparam, firstMsg } = req.body;\n        if (!question) {\n            throw new Error(\"No input\");\n        }\n        if (!nifparam) {\n            nifparam = \"Z00000300\"; // Set the 'nifparam' variable to 'Z00000300' if it doesn't exist in the request body\n        }\n        const pinecone = new _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_0__.Pinecone();\n        const pineconeIndex = pinecone.Index(process.env.PINECONE_INDEX);\n        const namespace = nifparam;\n        const vectorStore = await _langchain_pinecone__WEBPACK_IMPORTED_MODULE_2__.PineconeStore.fromExistingIndex(new _langchain_openai__WEBPACK_IMPORTED_MODULE_1__.OpenAIEmbeddings(), {\n            pineconeIndex,\n            namespace,\n            filter: {\n                NIF: {\n                    $eq: nifparam\n                }\n            }\n        });\n        const retriever = vectorStore.asRetriever();\n        const llm = new _langchain_openai__WEBPACK_IMPORTED_MODULE_1__.ChatOpenAI({\n            modelName: process.env[\"OPENAI_MODEL\"],\n            temperature: 0\n        });\n        const contextualizeQPrompt = _langchain_core_prompts__WEBPACK_IMPORTED_MODULE_4__.ChatPromptTemplate.fromMessages([\n            [\n                \"system\",\n                contextualizeQSystemPrompt\n            ],\n            new _langchain_core_prompts__WEBPACK_IMPORTED_MODULE_4__.MessagesPlaceholder(\"chat_history\"),\n            [\n                \"human\",\n                \"{input}\"\n            ]\n        ]);\n        const historyAwareRetriever = await (0,langchain_chains_history_aware_retriever__WEBPACK_IMPORTED_MODULE_6__.createHistoryAwareRetriever)({\n            llm,\n            retriever,\n            rephrasePrompt: contextualizeQPrompt\n        });\n        const qaPrompt = _langchain_core_prompts__WEBPACK_IMPORTED_MODULE_4__.ChatPromptTemplate.fromMessages([\n            [\n                \"system\",\n                qaSystemPrompt\n            ],\n            new _langchain_core_prompts__WEBPACK_IMPORTED_MODULE_4__.MessagesPlaceholder(\"chat_history\"),\n            [\n                \"human\",\n                \"{input}\"\n            ]\n        ]);\n        // Below we use createStuffDocuments_chain to feed all retrieved context\n        // into the LLM. Note that we can also use StuffDocumentsChain and other\n        // instances of BaseCombineDocumentsChain.\n        const questionAnswerChain = await (0,langchain_chains_combine_documents__WEBPACK_IMPORTED_MODULE_5__.createStuffDocumentsChain)({\n            llm,\n            prompt: qaPrompt\n        });\n        const ragChain = await (0,langchain_chains_retrieval__WEBPACK_IMPORTED_MODULE_3__.createRetrievalChain)({\n            retriever: historyAwareRetriever,\n            combineDocsChain: questionAnswerChain\n        });\n        // Usage:\n        const chat_history = [];\n        const response = await ragChain.invoke({\n            chat_history,\n            input: question\n        });\n        //console.log(JSON.stringify(response.answer, null, 2));\n        return res.status(200).json({\n            result: response\n        });\n    } catch (error) {\n        console.error(error);\n        res.status(500).json({\n            message: error.message\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvcGRmLXF1ZXJ5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUF1RDtBQUNGO0FBQ0Q7QUFDTDtBQUNtQjtBQUlqQztBQUU4QztBQUNRO0FBRXZGLE1BQU1TLHlDQUF5QyxDQUFDOzs7Ozs7Ozs7O1lBVXBDLENBQUM7QUFFYix5QkFBeUI7QUFDekIsTUFBTUMsNkJBQTZCLENBQUM7Ozs7O3VEQUttQixDQUFDO0FBRXhELGtCQUFrQjtBQUNsQixNQUFNQyxpQkFBaUIsQ0FBQzs7Ozs7OztTQU9mLENBQUM7QUFFVixJQUFJQztBQUVXLGVBQWVDLFFBQVFDLEdBQUcsRUFBRUMsR0FBRztJQUM1QyxJQUFJO1FBQ0YsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLFFBQVE7WUFDekIsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBRUEsdUJBQXVCO1FBQ3ZCLElBQUksRUFBRUMsUUFBUSxFQUFFQyxRQUFRLEVBQUVDLFFBQVEsRUFBRSxHQUFHTixJQUFJTyxJQUFJO1FBRS9DLElBQUksQ0FBQ0gsVUFBVTtZQUNiLE1BQU0sSUFBSUQsTUFBTTtRQUNsQjtRQUVBLElBQUksQ0FBQ0UsVUFBVTtZQUNiQSxXQUFXLGFBQWEscUZBQXFGO1FBQy9HO1FBRUEsTUFBTUcsV0FBVyxJQUFJdEIsaUVBQVFBO1FBRTdCLE1BQU11QixnQkFBZ0JELFNBQVNFLEtBQUssQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDQyxjQUFjO1FBQy9ELE1BQU1DLFlBQVlUO1FBQ2xCLE1BQU1VLGNBQWMsTUFBTTNCLDhEQUFhQSxDQUFDNEIsaUJBQWlCLENBQ3ZELElBQUk3QiwrREFBZ0JBLElBQ3BCO1lBQUVzQjtZQUFlSztZQUFXRyxRQUFRO2dCQUFFQyxLQUFLO29CQUFFQyxLQUFLZDtnQkFBUztZQUFFO1FBQUU7UUFFakUsTUFBTWUsWUFBWUwsWUFBWU0sV0FBVztRQUN6QyxNQUFNQyxNQUFNLElBQUlqQyx5REFBVUEsQ0FBQztZQUN6QmtDLFdBQVdaLFFBQVFDLEdBQUcsQ0FBQyxlQUFlO1lBQ3RDWSxhQUFhO1FBQ2Y7UUFDQSxNQUFNQyx1QkFBdUJsQyx1RUFBa0JBLENBQUNtQyxZQUFZLENBQUM7WUFDM0Q7Z0JBQUM7Z0JBQVU5QjthQUEyQjtZQUN0QyxJQUFJSix3RUFBbUJBLENBQUM7WUFDeEI7Z0JBQUM7Z0JBQVM7YUFBVTtTQUNyQjtRQUNELE1BQU1tQyx3QkFBd0IsTUFBTWpDLHFHQUEyQkEsQ0FBQztZQUM5RDRCO1lBQ0FGO1lBQ0FRLGdCQUFnQkg7UUFDbEI7UUFDQSxNQUFNSSxXQUFXdEMsdUVBQWtCQSxDQUFDbUMsWUFBWSxDQUFDO1lBQy9DO2dCQUFDO2dCQUFVN0I7YUFBZTtZQUMxQixJQUFJTCx3RUFBbUJBLENBQUM7WUFDeEI7Z0JBQUM7Z0JBQVM7YUFBVTtTQUNyQjtRQUNELHdFQUF3RTtRQUN4RSx3RUFBd0U7UUFDeEUsMENBQTBDO1FBQzFDLE1BQU1zQyxzQkFBc0IsTUFBTXJDLDZGQUF5QkEsQ0FBQztZQUMxRDZCO1lBQ0FTLFFBQVFGO1FBQ1Y7UUFFQSxNQUFNRyxXQUFXLE1BQU0xQyxnRkFBb0JBLENBQUM7WUFDMUM4QixXQUFXTztZQUNYTSxrQkFBa0JIO1FBQ3BCO1FBQ0EsU0FBUztRQUNULE1BQU1JLGVBQThCLEVBQUU7UUFDdEMsTUFBTUMsV0FBVyxNQUFNSCxTQUFTSSxNQUFNLENBQUM7WUFDckNGO1lBQ0FHLE9BQU9qQztRQUNUO1FBRUEsd0RBQXdEO1FBRXhELE9BQU9ILElBQUlxQyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLFFBQVFMO1FBQVM7SUFDakQsRUFBRSxPQUFPTSxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQ0E7UUFDZHhDLElBQUlxQyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVJLFNBQVNGLE1BQU1FLE9BQU87UUFBQztJQUNoRDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaXRhY2EtdjIvLi9wYWdlcy9hcGkvcGRmLXF1ZXJ5LnRzPzM4OTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGluZWNvbmUgfSBmcm9tIFwiQHBpbmVjb25lLWRhdGFiYXNlL3BpbmVjb25lXCI7XG5pbXBvcnQgeyBPcGVuQUlFbWJlZGRpbmdzIH0gZnJvbSBcIkBsYW5nY2hhaW4vb3BlbmFpXCI7XG5pbXBvcnQgeyBQaW5lY29uZVN0b3JlIH0gZnJvbSBcIkBsYW5nY2hhaW4vcGluZWNvbmVcIjtcbmltcG9ydCB7IENoYXRPcGVuQUkgfSBmcm9tIFwiQGxhbmdjaGFpbi9vcGVuYWlcIjtcbmltcG9ydCB7IGNyZWF0ZVJldHJpZXZhbENoYWluIH0gZnJvbSBcImxhbmdjaGFpbi9jaGFpbnMvcmV0cmlldmFsXCI7XG5pbXBvcnQge1xuICBDaGF0UHJvbXB0VGVtcGxhdGUsXG4gIE1lc3NhZ2VzUGxhY2Vob2xkZXIsXG59IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcHJvbXB0c1wiO1xuaW1wb3J0IHsgQmFzZU1lc3NhZ2UgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzXCI7XG5pbXBvcnQgeyBjcmVhdGVTdHVmZkRvY3VtZW50c0NoYWluIH0gZnJvbSBcImxhbmdjaGFpbi9jaGFpbnMvY29tYmluZV9kb2N1bWVudHNcIjtcbmltcG9ydCB7IGNyZWF0ZUhpc3RvcnlBd2FyZVJldHJpZXZlciB9IGZyb20gXCJsYW5nY2hhaW4vY2hhaW5zL2hpc3RvcnlfYXdhcmVfcmV0cmlldmVyXCI7XG5cbmNvbnN0IENVU1RPTV9RVUVTVElPTl9HRU5FUkFUT1JfQ0hBSU5fUFJPTVBUID0gYEdpdmVuIHRoZSBmb2xsb3dpbmcgY29udmVyc2F0aW9uIGFuZCBhIGZvbGxvdyB1cCBxdWVzdGlvbiwgcmV0dXJuIHRoZSBjb252ZXJzYXRpb24gaGlzdG9yeSBleGNlcnB0IHRoYXQgaW5jbHVkZXMgYW55IHJlbGV2YW50IGNvbnRleHQgdG8gdGhlIHF1ZXN0aW9uIGlmIGl0IGV4aXN0cyBhbmQgcmVwaHJhc2UgdGhlIGZvbGxvdyB1cCBxdWVzdGlvbiB0byBiZSBhIHN0YW5kYWxvbmUgcXVlc3Rpb24uXG5Gb2xsb3cgVXAgSW5wdXQ6IHtxdWVzdGlvbn1cbllvdXIgYW5zd2VyIHNob3VsZCBmb2xsb3cgdGhlIGZvbGxvd2luZyBmb3JtYXQ6XG5cXGBcXGBcXGBcblVzZSB0aGUgZm9sbG93aW5nIHBpZWNlcyBvZiBjb250ZXh0IHRvIGFuc3dlciB0aGUgdXNlcnMgcXVlc3Rpb24uIEZpcnN0IG9mIGFsbCBsb29rIGF0IHRoZSBkb2N1bWVudHMgdXBsb2FkZWQgYXQgdGhlIHZlY3RvciBzdG9yZSBhbmQgYWZ0ZXIgdGhhdCBsb29rIGF0IHRoZSBjaGF0IGhpc3RvcnkgYW5kIHNlZSBpZiB0aGVyZSBpcyBhbnkgcmVsZXZhbnQgY29udGV4dCB0byB0aGUgcXVlc3Rpb24uIElmIHRoZXJlIGlzLCB0aGVuIHJlcGhyYXNlIHRoZSBxdWVzdGlvbiB0byBiZSBhIHN0YW5kYWxvbmUgcXVlc3Rpb24uXG5BbHdheXMgYW5zd2VyIGluIFNwYW5pc2guIElmIHlvdSBkb24ndCBrbm93IHRoZSBhbnN3ZXIsIGp1c3Qgc2F5IHRoYXQgeW91IGRvbid0IGtub3csIGRvbid0IHRyeSB0byBtYWtlIHVwIGFuIGFuc3dlci5cbi0tLS0tLS0tLS0tLS0tLS1cbjxSZWxldmFudCBjaGF0IGhpc3RvcnkgZXhjZXJwdCBhcyBjb250ZXh0IGhlcmU+XG5TdGFuZGFsb25lIHF1ZXN0aW9uOiA8UmVwaHJhc2VkIHF1ZXN0aW9uIGhlcmU+XG5cXGBcXGBcXGBcbllvdXIgYW5zd2VyOmA7XG5cbi8vIENvbnRleHR1YWxpemUgcXVlc3Rpb25cbmNvbnN0IGNvbnRleHR1YWxpemVRU3lzdGVtUHJvbXB0ID0gYFxuR2l2ZW4gYSBjaGF0IGhpc3RvcnkgYW5kIHRoZSBsYXRlc3QgdXNlciBxdWVzdGlvblxud2hpY2ggbWlnaHQgcmVmZXJlbmNlIGNvbnRleHQgaW4gdGhlIGNoYXQgaGlzdG9yeSxcbmZvcm11bGF0ZSBhIHN0YW5kYWxvbmUgcXVlc3Rpb24gd2hpY2ggY2FuIGJlIHVuZGVyc3Rvb2RcbndpdGhvdXQgdGhlIGNoYXQgaGlzdG9yeS4gRG8gTk9UIGFuc3dlciB0aGUgcXVlc3Rpb24sIGp1c3RcbnJlZm9ybXVsYXRlIGl0IGlmIG5lZWRlZCBhbmQgb3RoZXJ3aXNlIHJldHVybiBpdCBhcyBpcy5gO1xuXG4vLyBBbnN3ZXIgcXVlc3Rpb25cbmNvbnN0IHFhU3lzdGVtUHJvbXB0ID0gYFxuWW91IGFyZSBhbiBhc3Npc3RhbnQgZm9yIHF1ZXN0aW9uLWFuc3dlcmluZyB0YXNrcy4gVXNlXG50aGUgZm9sbG93aW5nIHBpZWNlcyBvZiByZXRyaWV2ZWQgY29udGV4dCB0byBhbnN3ZXIgdGhlXG5xdWVzdGlvbi4gSWYgeW91IGRvbid0IGtub3cgdGhlIGFuc3dlciwganVzdCBzYXkgdGhhdCB5b3VcbmRvbid0IGtub3cuIFVzZSB0aHJlZSBzZW50ZW5jZXMgbWF4aW11bSBhbmQga2VlcCB0aGUgYW5zd2VyXG5jb25jaXNlLlxuXFxuXFxuXG57Y29udGV4dH1gO1xuXG5sZXQgY2hhaW47XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgdHJ5IHtcbiAgICBpZiAocmVxLm1ldGhvZCAhPT0gXCJQT1NUXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgYWxsb3dlZFwiKTtcbiAgICB9XG5cbiAgICAvLyBHcmFiIHRoZSB1c2VyIHByb21wdFxuICAgIGxldCB7IHF1ZXN0aW9uLCBuaWZwYXJhbSwgZmlyc3RNc2cgfSA9IHJlcS5ib2R5O1xuXG4gICAgaWYgKCFxdWVzdGlvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gaW5wdXRcIik7XG4gICAgfVxuXG4gICAgaWYgKCFuaWZwYXJhbSkge1xuICAgICAgbmlmcGFyYW0gPSBcIlowMDAwMDMwMFwiOyAvLyBTZXQgdGhlICduaWZwYXJhbScgdmFyaWFibGUgdG8gJ1owMDAwMDMwMCcgaWYgaXQgZG9lc24ndCBleGlzdCBpbiB0aGUgcmVxdWVzdCBib2R5XG4gICAgfVxuXG4gICAgY29uc3QgcGluZWNvbmUgPSBuZXcgUGluZWNvbmUoKTtcblxuICAgIGNvbnN0IHBpbmVjb25lSW5kZXggPSBwaW5lY29uZS5JbmRleChwcm9jZXNzLmVudi5QSU5FQ09ORV9JTkRFWCk7XG4gICAgY29uc3QgbmFtZXNwYWNlID0gbmlmcGFyYW07XG4gICAgY29uc3QgdmVjdG9yU3RvcmUgPSBhd2FpdCBQaW5lY29uZVN0b3JlLmZyb21FeGlzdGluZ0luZGV4KFxuICAgICAgbmV3IE9wZW5BSUVtYmVkZGluZ3MoKSxcbiAgICAgIHsgcGluZWNvbmVJbmRleCwgbmFtZXNwYWNlLCBmaWx0ZXI6IHsgTklGOiB7ICRlcTogbmlmcGFyYW0gfSB9IH0sXG4gICAgKTtcbiAgICBjb25zdCByZXRyaWV2ZXIgPSB2ZWN0b3JTdG9yZS5hc1JldHJpZXZlcigpO1xuICAgIGNvbnN0IGxsbSA9IG5ldyBDaGF0T3BlbkFJKHtcbiAgICAgIG1vZGVsTmFtZTogcHJvY2Vzcy5lbnZbXCJPUEVOQUlfTU9ERUxcIl0sXG4gICAgICB0ZW1wZXJhdHVyZTogMCxcbiAgICB9KTtcbiAgICBjb25zdCBjb250ZXh0dWFsaXplUVByb21wdCA9IENoYXRQcm9tcHRUZW1wbGF0ZS5mcm9tTWVzc2FnZXMoW1xuICAgICAgW1wic3lzdGVtXCIsIGNvbnRleHR1YWxpemVRU3lzdGVtUHJvbXB0XSxcbiAgICAgIG5ldyBNZXNzYWdlc1BsYWNlaG9sZGVyKFwiY2hhdF9oaXN0b3J5XCIpLFxuICAgICAgW1wiaHVtYW5cIiwgXCJ7aW5wdXR9XCJdLFxuICAgIF0pO1xuICAgIGNvbnN0IGhpc3RvcnlBd2FyZVJldHJpZXZlciA9IGF3YWl0IGNyZWF0ZUhpc3RvcnlBd2FyZVJldHJpZXZlcih7XG4gICAgICBsbG0sXG4gICAgICByZXRyaWV2ZXIsXG4gICAgICByZXBocmFzZVByb21wdDogY29udGV4dHVhbGl6ZVFQcm9tcHQsXG4gICAgfSk7XG4gICAgY29uc3QgcWFQcm9tcHQgPSBDaGF0UHJvbXB0VGVtcGxhdGUuZnJvbU1lc3NhZ2VzKFtcbiAgICAgIFtcInN5c3RlbVwiLCBxYVN5c3RlbVByb21wdF0sXG4gICAgICBuZXcgTWVzc2FnZXNQbGFjZWhvbGRlcihcImNoYXRfaGlzdG9yeVwiKSxcbiAgICAgIFtcImh1bWFuXCIsIFwie2lucHV0fVwiXSxcbiAgICBdKTtcbiAgICAvLyBCZWxvdyB3ZSB1c2UgY3JlYXRlU3R1ZmZEb2N1bWVudHNfY2hhaW4gdG8gZmVlZCBhbGwgcmV0cmlldmVkIGNvbnRleHRcbiAgICAvLyBpbnRvIHRoZSBMTE0uIE5vdGUgdGhhdCB3ZSBjYW4gYWxzbyB1c2UgU3R1ZmZEb2N1bWVudHNDaGFpbiBhbmQgb3RoZXJcbiAgICAvLyBpbnN0YW5jZXMgb2YgQmFzZUNvbWJpbmVEb2N1bWVudHNDaGFpbi5cbiAgICBjb25zdCBxdWVzdGlvbkFuc3dlckNoYWluID0gYXdhaXQgY3JlYXRlU3R1ZmZEb2N1bWVudHNDaGFpbih7XG4gICAgICBsbG0sXG4gICAgICBwcm9tcHQ6IHFhUHJvbXB0LFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmFnQ2hhaW4gPSBhd2FpdCBjcmVhdGVSZXRyaWV2YWxDaGFpbih7XG4gICAgICByZXRyaWV2ZXI6IGhpc3RvcnlBd2FyZVJldHJpZXZlcixcbiAgICAgIGNvbWJpbmVEb2NzQ2hhaW46IHF1ZXN0aW9uQW5zd2VyQ2hhaW4sXG4gICAgfSk7XG4gICAgLy8gVXNhZ2U6XG4gICAgY29uc3QgY2hhdF9oaXN0b3J5OiBCYXNlTWVzc2FnZVtdID0gW107XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByYWdDaGFpbi5pbnZva2Uoe1xuICAgICAgY2hhdF9oaXN0b3J5LFxuICAgICAgaW5wdXQ6IHF1ZXN0aW9uLFxuICAgIH0pO1xuXG4gICAgLy9jb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShyZXNwb25zZS5hbnN3ZXIsIG51bGwsIDIpKTtcblxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHJlc3VsdDogcmVzcG9uc2UgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiUGluZWNvbmUiLCJPcGVuQUlFbWJlZGRpbmdzIiwiUGluZWNvbmVTdG9yZSIsIkNoYXRPcGVuQUkiLCJjcmVhdGVSZXRyaWV2YWxDaGFpbiIsIkNoYXRQcm9tcHRUZW1wbGF0ZSIsIk1lc3NhZ2VzUGxhY2Vob2xkZXIiLCJjcmVhdGVTdHVmZkRvY3VtZW50c0NoYWluIiwiY3JlYXRlSGlzdG9yeUF3YXJlUmV0cmlldmVyIiwiQ1VTVE9NX1FVRVNUSU9OX0dFTkVSQVRPUl9DSEFJTl9QUk9NUFQiLCJjb250ZXh0dWFsaXplUVN5c3RlbVByb21wdCIsInFhU3lzdGVtUHJvbXB0IiwiY2hhaW4iLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwiRXJyb3IiLCJxdWVzdGlvbiIsIm5pZnBhcmFtIiwiZmlyc3RNc2ciLCJib2R5IiwicGluZWNvbmUiLCJwaW5lY29uZUluZGV4IiwiSW5kZXgiLCJwcm9jZXNzIiwiZW52IiwiUElORUNPTkVfSU5ERVgiLCJuYW1lc3BhY2UiLCJ2ZWN0b3JTdG9yZSIsImZyb21FeGlzdGluZ0luZGV4IiwiZmlsdGVyIiwiTklGIiwiJGVxIiwicmV0cmlldmVyIiwiYXNSZXRyaWV2ZXIiLCJsbG0iLCJtb2RlbE5hbWUiLCJ0ZW1wZXJhdHVyZSIsImNvbnRleHR1YWxpemVRUHJvbXB0IiwiZnJvbU1lc3NhZ2VzIiwiaGlzdG9yeUF3YXJlUmV0cmlldmVyIiwicmVwaHJhc2VQcm9tcHQiLCJxYVByb21wdCIsInF1ZXN0aW9uQW5zd2VyQ2hhaW4iLCJwcm9tcHQiLCJyYWdDaGFpbiIsImNvbWJpbmVEb2NzQ2hhaW4iLCJjaGF0X2hpc3RvcnkiLCJyZXNwb25zZSIsImludm9rZSIsImlucHV0Iiwic3RhdHVzIiwianNvbiIsInJlc3VsdCIsImVycm9yIiwiY29uc29sZSIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/pdf-query.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpdf-query&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cpdf-query.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();